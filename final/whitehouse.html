<script src="../lib/tracery.js"></script>
<script src="../lib/mousetrap.min.js"></script>
<script src="../lib/jquery-1.11.1.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Arimo" rel="stylesheet">
<style type="text/css">
		.tweet {
			position: relative;
			width:566px;
			height:288px;
		}
		#tweettext {
			color: #292F33;
			position: absolute;
			top: 30%;
			left: 7%;
			width: 85%;
			text-align: left;
			font-size: 24px;
			font-weight: 400;
			letter-spacing: 1px;
			font-family: 'Helvetica', sans-serif;
		}
		#tweetretweets {
			color: #0D5B73;

			position: absolute;
			top: 78%;
			left: 6%;

			text-align: center;
			font-size: 16px;
			font-weight: 600;
			font-family: 'Helvetica', sans-serif;
		}
		#tweetfavs {
			color: #0D5B73;
			position: absolute;
			top: 78%;
			left: 18.8%;
			text-align: center;
			font-size: 16px;
			font-weight: 600;
			font-family: 'Helvetica', sans-serif;
		}
		#tweetdate {
			color: #AAB8C2;
			position: absolute;
			top: 87%;
			left: 5.8%;
			text-align: left;
			font-size: 12px;
			font-weight: 500;
			font-family: 'Helvetica', sans-serif;
		}
		a {
			color:  red;
		}
		h1 {
			text-align: left;
  			color:  black;
  			margin-top: 10%;
  			margin-left: 10%;
  			margin-right: 10%;
  			font-family: Century Gothic;
  			font-size: 18px;
		}
</style>
<script type = "text/javascript">

var advisors = [ 
		"Chris Christie",
		"Robert Mattis",
		"Steve Bannon",
		"Ben Carson",
		"James Mattis",
		"Jeff Sessions",
		"Reince Priebus",
		"Michael Flynn",
	];
var detractors = ["The Green Party",
				  "Alec Baldwin",
				  "Hillary Clinton",
				  "Obama",
				  "The New York Times",
				  "CNN"];
var enemies = ["China", "Russia", "ISIS", "Iran"]

var tweetTemplates = [
	"#badadj.capitalize# #enemies# thinks they can get a way with #badaction##exc# #badcomment#",
	"#detractor# needs to stop #badaction##exc# #badcomment#"
]
var exclamationPoints = [".", "!", "!!!", "!!!", "!!!!"];
var badComments = ["Sadly, I don't know if that will ever happen#exc#", 
		"WRONG#exc#",
		"Sad#exc#",
		"If they do, there MUST be consequences#exc#"
	]
var grammarObj = {
  "advisors": advisors,
  "enemies": enemies,
  "detractor": detractors,
  "badadj" : ["failing", "crooked", "weak"],
  "badaction" : ["being a currency manipulator",
  			  "stealing our jobs",
  			  "taking away our freedom"],
  "badcomment": badComments,
  "tweet" : tweetTemplates,
  "exc" : exclamationPoints
};

var reports = [["China", "Department of State", "China is manipulating it's currency"],
		  ["education in America", "Department of Education", "American students are lagging behind those of other developed nations"],
		  ["the space program", "NASA", "they need more funding to compete with Russia and China"]];

var responses = [["label China a currency manipulator", "engage China in a trade war", "declare war on China", "impose sanctions"],
		["get rid of the Common Core", "create new tests America does better on", "blame Obama", "expand private school vouchers"],
		["defund NASA", "sign an executive order prohibiting NASA from researching climate change", "announce a new space race to Mars", "ask them whether the moon landing was real"]];

var grammar = tracery.createGrammar(grammarObj)

var dayString = "";
var mostRecent = "";

var approvalRating = 65;
var currentIssue = 0;
var wait = 1500;
var day = 0;

function getApprovalRating() {
	return "Your approval rating is " + approvalRating + "%."
}
function leftPad(number, targetLength) {
    var output = number + '';
    while (output.length < targetLength) {
        output = '0' + output;
    }
    return output;
}

function backToSleepHelper() {
	dayString = "";
	mostRecent = "";
	eventCount = 0;
    displayNext(true);
    currentTime += getRandomInt(20, 60) + getRandomInt(20, 60);
    mentalHealth = Math.max(0, mentalHealth - 0.2);
    if (currentTime > sleepTime) {
    	startDay(48);
    }
    else {
    	backToSleep(0);
    }
}

function tweetHelper() {
	dayString = "";
	mostRecent = "";
	eventCount = 0;
    $("h1").html(dayString);
    tweetStep(0);
}
function tweetStep(iter) {
	if (iter == 0) {
	    mostRecent = "You ignore the advice of your advisors.";
	    displayNext(true);
        setTimeout(function() {
        	tweetStep(1);
    	}, wait);
	}
	else if (iter == 1) {
	    mostRecent = "You're better at this than they are.";
	 	displayNext(true);
        setTimeout(function() {
        	tweetStep(2);
    	}, wait);
	}
	else if (iter == 2) {
	   mostRecent = "Instead, you tweet out:"
	   displayNext(true);
        setTimeout(function() {
        	tweetStep(3);
    	}, wait);
	}
	else if (iter == 3) {
	   tweetText = grammar.flatten("#tweet#")
	   retweets = getRandomInt(100000, 999999)
	   likes = getRandomInt(100000, 999999)
	   imageSettings = "<img src=\"trumptweet.png\" width=\"566px\" height=\"288px\">";
	   divSettings = "<div class =\"tweet\" id=\"tweet1\">";
	   ttext = "<span id=\"tweettext\">" + grammar.flatten("#tweet#") + "</span>";
	   tretweets = "<span id=\"tweetretweets\">" + getRandomInt(100, 999) + "," + getRandomInt(100, 999) + "</span>";
	   tlikes = "<span id=\"tweetfavs\">" + getRandomInt(100, 999) + "," + getRandomInt(100, 999) + "</span>";
	   tdate = "<span id=\"tweetdate\">" + "8:00 AM" + " - "  +"12/11/2016" + "</span>";
	   mostRecent = divSettings + imageSettings + ttext + tretweets + tlikes + tdate + "</div>"
	   displayNext(true);
        setTimeout(function() {
        	tweetStep(4);
    	}, wait);
	}
	else if (iter == 4) {
	   mostRecent = "<a href='#' onclick='startDayHelper()'>You are so good at being President.</a>"
	   displayNext(true);
	}
}


function startDayHelper() {
	dayString = "";
	mostRecent = "";
    $("h1").html(dayString);
    day += 1;
    approvalRating -= getRandomInt(0, 3);
    startDay(0);
}
function startDay(iter) {
	if (iter == 0) {
	    mostRecent = "You are president Donald J. Trump.";
	    displayNext(true);
        setTimeout(function() {
        	startDay(1);
    	}, wait);
	}
	else if (iter == 1) {
	    mostRecent = "It is Day " + day + " of your presidency.";
	 	displayNext(true);
        setTimeout(function() {
        	startDay(2);
    	}, wait);
	}
	else if (iter == 2) {
	    mostRecent = getApprovalRating();
	   displayNext(true);
        setTimeout(function() {
        	startDay(3);
    	}, wait);
	}
	else if (iter == 3) {
	    mostRecent = "The country is doing okay, for now.";
	   displayNext(true);
        setTimeout(function() {
        	startDay(4);
    	}, wait);
	}
	else if (iter == 4) {
		currentIssue = getRandomInt(0, reports.length - 1);
	    mostRecent = "You recieve a report from " + reports[currentIssue][1] + " on " + reports[currentIssue][0] + ".";
	 	displayNext(true);
        setTimeout(function() {
        	startDay(5);
    	}, wait);
	}
	else if (iter == 5) {
	    mostRecent = "Apparently, " + reports[currentIssue][2] + "...";
	 	displayNext(true);
        setTimeout(function() {
        	startDay(6);
    	}, wait);
	}
	else if (iter == 6) {
	    mostRecent = "Your advisors suggest some possible courses of action:";
	 	displayNext(true);
        setTimeout(function() {
        	startDay(7);
    	}, wait);
	}
	else if (iter == 7) {
		advisor1 = getRandomInt(0, advisors.length - 1);
		advisor2 = getRandomInt(0, advisors.length - 1);
		while (advisor1 == advisor2) {
			advisor2 = getRandomInt(0, advisors.length - 1);
		}

		choice1 = getRandomInt(0, responses[currentIssue].length - 1);
		choice2 = getRandomInt(0, responses[currentIssue].length - 1);
		while (choice1 == choice2) {
			choice2 = getRandomInt(0, responses[currentIssue].length - 1);
		}
	    idea1 = "<a href='#' onclick='tweetHelper()'>" + advisors[advisor1] + " wants you to " + responses[currentIssue][choice1] + ".</a>";
	    idea2 = "<a href='#' onclick='tweetHelper()'>" + advisors[advisor2] + " wants you to " + responses[currentIssue][choice2] + ".</a>";
		mostRecent = idea1 + "<p></p>but<p></p>" + idea2;
		displayNext(true);
	}
}

function displayNext(wrap) {
	opacity = 1;
	toAppend = "";
	if (wrap) {
		toAppend = "<span style= 'color:red; opacity: " +  opacity + "'>" + mostRecent + "</span>";
	}
	else {
		toAppend ="<span style= color:red>" + mostRecent + "</span>";
	}
	$(dest).html( "<span style= opacity:" + opacity + ">" + dayString + "</span>"+ "<p></p>"  + toAppend);
    dayString += "<p></p>" + mostRecent;
}
function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1) + min);
}
$( document ).ready(function() {
    $('#textDiv').append('<h1></h1>');
    $('#textDiv').append('<span id="bottom"></span>');
    dest = $('h1:last')[0]; 
    startDayHelper();
});


</script>
<h1></h1>